---
layout: post
title:  "HTB Devel Windows"
description : 
tags: 
---

# HTB Devel

Nmap scan
```ruby
Nmap scan report for 10.10.10.5
Host is up (0.047s latency).

PORT   STATE SERVICE VERSION
21/tcp open  ftp     Microsoft ftpd
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
| 03-18-17  02:06AM       <DIR>          aspnet_client
| 03-17-17  05:37PM                  689 iisstart.htm
|_03-17-17  05:37PM               184946 welcome.png
| ftp-syst: 
|_  SYST: Windows_NT
80/tcp open  http    Microsoft IIS httpd 7.5
| http-methods: 
|_  Potentially risky methods: TRACE
|_http-server-header: Microsoft-IIS/7.5
|_http-title: IIS7
Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows
```
![](https://lh3.googleusercontent.com/7YOWvTUb09J_ksV3WWZEsMonOjq0V8eAOdLhuPRM0lkcaN_X6Lm4zKyXZsEzDE1eCHSQiHs25YUEBOzM6m84NAoSP21UOb_Odxo32WgfAhUzFsRpLE05fmAwErP9YUo092tkQh35EFUGyJhgSvz7-O-FArcChAJ2-AAO1zrgzDOtfBS0yvRrsZ3g-YMYcrG_HOl4mGOETdWh4yjYUi5dpxF3HlkPWUiHkg5glN6EHmUNTXqfDM0gCS-Jy38qvw5lF1bnQprzDsxEV6lw4XoeiQZEQXZbrzf6h4M_-dV_GxAYEZ2dbIoinrZh1ia_ZR5zZVCGhy9I1yi-6ZE93KYjIWFCPCKET88rAy96JEtDOXpT3df9hU_zrR8aNqGNQeB9zM6iH_DfCwslr5HqbEF5v8ci8XL-_dxhWKlYpye5bGrJoNvPxm-rGpXCINdOmCHcb_BEkH302OBALO8CM8w0vgwuhkTRPmU3vINZVZ7fuyCjcXN1EGfoSu2ox0qszopKavqMveWCOnQgGEyW0xwk-TSwO_icZ_AkPDtbbsiOlILLlRaXmJ1WSkcQIcz_lQCuAqI_HLko4-tbVLchI2B-RhbU6infpT19QG2lAeQrIL-RNZbAuHluTAqZWTVj5S5OwAwzROTPGNFzV1HgE93fkT720Tk5_eVjw_x8ROdn95b934c0Smo6VB8=w955-h438-no)

Nikto scan
![](https://lh3.googleusercontent.com/0XrPKDV08lIglSfM3Badgu5MIE-rViHoswE7tuoTQFqxndcn61hp31gNOnxwBkHiDXQQ44mtIzwMvdEmWO7FDllL4jSb-IIk7UolpYR0O0BYWLlFwnmKuaWEMyzOciVIJHYJ8vEe0T936ZsWBQiLLYNpkpSYKaZDVTcgWjddPaZ-sg_eGoFHLytcpVyecUIw5Q1KCekayJg5mCRPnBRTS-x2IJ4QUTvmqVXmGvxCcfGV7knlwn8LFezkwhT6oeg3np13kyKhLRfX00OgOktHyil2fKl1tZgyxyVMgXQjai_yhUui9AuWa3lNwOGJiMIsOiUcB15ragKl7BJ9GNdxalRKp9CwQlovWfFEo0zlUbH7el6E8SqgQo2zISvu5hiCLrXCRjJoE2tsUC_2fF9SR9n_c_JkXQjgv3Vsn4iKmnF9swiJkNJEMCBtICNEeoOvBQ1i4Vhp3bHW5oG6fo0eyIBr9jMy6ncm2iDtUsb2_5M2-QWG5WQZoIiVDz13pMErRZA7PTAjVyq0IArPZq-Ohqf41yfxjf8_yUoeV-BTD34lAAZUFlXyR0zpU1BhWtfSC6alFehI-MaxxubZx9F-X2s8OITTkm9GVINDyyLIohHGVkPck5ETHC7BjodxRpOYKXBl_a3bU2e2CnlSfPaOKdi_HTzR1gbjxCRhz627I2nBHi1sc77gtV8=w805-h383-no)

Port 80 reveals the IIS version running
![](https://lh3.googleusercontent.com/xWO7znVLumikMu_8jHAG2eU9v2JesFP3FYsRYRKB_-I7kzWryBCuO0AunJQ38WPTwq9viecOnuTmVmr1tjpTm0NP76REbdsfv0L02Nmku8rz773H0-39SNVRBcz8kSBXm4-u_IQ_Wpm-rJMnpJ4o1I3lcNRPT56hxOFsS8EWhJquK21EpFOomiSzIKc9mqVUCeGvEiSCJQlmQSaf_Sn7hMqwdLE1gjwD0KAm9ayWu5x1MlIa1fse8lvBepFuWjrxhTj6-Jevpe3MuITnZHJzVD9WW3bR_38lLh-59eN2JKTP9DzYrbBs_oVGbgu6fXZ6ivpMHOsKxLVvCl2OGbK0DJ51S5xCPCrix1uFgS3yHRpznLpcRI9KDc3-pnEU0viea3vS1gjmJuH0-mKF4SSmTMHn0yYNIq0B68DUUBplMIczBkLFuWe0XnpkfTQB1dtHLivB2ZjAsAwuHQ1uxBVfDX8IgaYHky3GzIvDGl0yNvEoHFUPFlaYZTcon6YaOTZu99IHdvbl4YL5EX7nDx4Y5ggdmtGbMDxlZPU3B2eB2giQ0X7dXq_CoCrAthYPv2YXShecPJhcgFsIseX2Bs7xGT5Q-_17hyOyf6U2--qlvl3SefhBU9DWSkwT2qXP4DY20i0YbwM9_ljQ1UWuR2htHzxjco40pQ68nk7U8GuRbWJeNUGn1kW49a0=w838-h458-no)

# Exploitation
Since we have access to the ftp as anonymous user and we are allow to upload files. 
We can simple drop a .ASPX backdoor and nectact and call for a reverse shell.
![](https://lh3.googleusercontent.com/wE0bevsLverTwail1zjgkcOiq6GrGPzx8j05fiUUEQVHSHM4Xf_QvP5kgXilvsgu--aYubRSotaV_fo3PLeYpFCkZjYagHwS3oltLGGpC32Q5Uskdf_Qx76Wx0_dSjwoe54aOhe__ELBL6siJBB5xKMFLJHqVmu_jSNJO9ufMoSdr9vSCGUUGi0TpCcZHWTJnP_qdHMdxWa_mGO4Zhced9lmNtrNXwtosdoM58byehV96peVOBQL54ZDIqdVtlp_Gyvn2SIwMZWXKB37ZTH7Za_CII0_lgg0VpQnA01njRDXA2Qcfdb8su24Q56ngbNRkEiOyn7JZSqLNgHv0IPZ-cbNBLa9lXaIvRwbIacUkIcZeaoIU0Y1FMHWZqU5QO71_90VTgw9iGcKugzuVAvfgZkkC3ZMKzTVwXDhDef4M41OUpbjwcHvjM4r6dKD0d840jbkz0nHf7mSMoxE9ItY3XKpbcmOH_7fns9stHmF4XRQZ9eH9GMdnPRjo3kochcliB0QjvQ6F719UiOfpJbzscb6GI_qA0RVv0Jydb-zSx5YiUbFbTMXxYrLmStaoqugsQWNKFR1vSOvjlrwDEqwW1c8r4e76mAqVkCkcrgZLPhEUqCp5eRNvC8hvVSYPFRXsaewTi-Jn55Xt6cyrdiRny-sKsmpU_EPfI0U77cKW37N1L49GX9Kuzo=w656-h309-no)

![](https://lh3.googleusercontent.com/iQ6rg5UEQ3DLqaTFKnnhLK3qAOR0Fya-9GvBwm7QyYVcmp3UdfYxmJwToLkF43UBSNXJvwRVxYZgbj-3Dgh4r9nE6p1zLYxrginF67bea0LAizPA8jOhhyyHwP--QtZ0jMWNbHW4R7TEpFmzlfTkbWRRxMOGdD7yz3kjoxl9068ne9ja9NvdnhjNYZ2Tarv9GmyJvnbBIGf4sNdDHqm8zIPqerzYIY4P2S9zs_kYpLQksvS2HrpDtESwKPP7l4tFCAQ1ECLiKkYW5tywVbovVKdw3IEWlopBUgM743wv3zZM_nfpb1tGBad0l4GCULtt-Zs1Piw6kXrSqE005VK7IK54WooqNbGdrHVYFUR3yWR2TRbFRr-iVAVEQC8bnGRw9sEdJ_43jBaKEh6XlmYHnXL1XuX9CEocEEIiTJe7VOUMi-Fy_hDuHJqNRNR2g9p4nZhSDt9qItcTR9BzLxCFLr4WrTolhoBx7tID_25N5aUH3xpno3Q77If0-ex_wg6VIID2iuLpHMo9kMeTzQq7nTW98vGycYvuIdKfswqpvi58CioF1R-_E6b6oY_jyYhkzBPi60obw2XmXcQz4y6iRZBy5JS1up97O_OqQaVmRwI0C4vV30G_OpsTmZuDpfQDFfw2mFo1jm1ATXzn0NSx5V7v_fjkwPOByzR9wU0M2O25y63DXD4n9sM=w485-h409-no)

![](https://lh3.googleusercontent.com/pp8IGkBcuzcjNePP8R-24104roSBmHtzxuBv82Ap9iiNvIr-hG4tW1_7HoWYtb1W_Cga6s_N4r7KsyAN9khOHQWn5vvJFBKms7bS1SRBYXV6JJtiWSDa3HszcqCggDtxEgt48PJYZSr9GXwiSFbsdXV-UYm7aQtFhOi7OaifpxSGGXLUlMN-_LQd8tRpM8cMbrgEFlCpautKqK3HfxJKw_ek14E1OU0WffsfKF0RelLQ9Qwg6vl4BsdW3Anh4H4ZYcrU_zA7IhCPYzI0NEuhYUGDLhpwnNOOhJ5k-WupIDJNin2-vh44iv6sR_MYS8xT7Z7Q02retXjx-ABCr6oXSJ85KcFMh9qV0sUsdB5G6vw77-dzN6QvSGecZeo7SWTuKy87ocWRqRlyFLnOFw1gDSLiSawNaLedNYgmk9ma22Hx6bEa2D08OPomTIjCiP8ZCXp2Q51ye3OwXPHQTv6H75gS-PRjC8ZrhKFxhgYjU0o020bQCvOJC4FaHrRFgKaJWOwXTyWryewdqSKEJKV01cDnbvPR__Qr1jJPgviIceIFp5jrXwmFTFHpNpMOTIvEEmJ-hc4TmkMTUDLm2yaIXU-lE2SKzJL_dpSVo2dYRFUO0cWpg66zdHiMu2R3QX1Mo9RbLo7DD1rLNVq_P8LMQTbTUQy5fGrUYsnhrmOMV5OtPa7V9DsGiBY=w602-h120-no)

![](https://lh3.googleusercontent.com/8fDfq91GEa4s37J-iWqRWJ38nrLL6kHY-2NKNgyvVUbql8jUIzTqhhaSpe4Y19NskBgYpWr87_eBJO6okZ0BElDwi9S3lmKtHyMssClS32n6sscq2RRr14P-Wxn0StbLxNcNi7Ry_8hQh49_RO3LcKfg7I91a94Mq_ooB_jV-RypO8jT2mn6APZZSjfGelDUA4u5C-sbrVT7zuwfP-JSbEleGWMa4jlQ2oLHYeZvtUFDvH-dJHMDF0s-YKSZT2VkIwQ2SDmXWxPeCcs_QNeEKvZ2_yGZRpGsxpFx5wHRPw9rwpVt6y9QP803ysH5gTrbKDhbURsP2IeDF1XSnkpg4G60gtz4KaTcJR_MSo3OIAVk79j0Qw9r_uoMatyXifFNlRx5XGDoGeNVBuxGF0-9rVnZn91kF2CjowMh9PJ5qsvYaoiCVrhlKTqoZalbs2S8Exz0BOMwHs9GPKZ1bAoqOjzARcF9blaC_k2bo4X5_tPVBECRIP8re_KPnwg8TKPMl703mDpxiX_7hyV8mU2l75_NgbRWRTBdxVXzG0t06KL9sv-SZjEUW7N4MBSptcvOqaoBs5FPLh8HvzUyE66Shwd41PIP7fQi-0KAJeukrK2CJfzpMscuBmKxK0AqLIdxwOBlRVanQ8WQ5ziQUTqECi1hMUqwITMoDKTS7cGir13cnclTKw5_Ueg=w719-h302-no)

```ruby
locate nc.exe ::: dir c:\ /s *nc.exe*
```
# Privilege Escalation
Systeminfo reveals the OS  running and the potential attack vector

- OS Name: Microsoft Windows 7 Enterprise
- OS Version: 6.1.7600 N/A Build 7600
- Exploit Title: Windows x86 (all versions) AFD privilege escalation (MS11-046)
- CVE:2011-1249
- https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS11-046

![](https://lh3.googleusercontent.com/MSX05alwrksVIvWjIPR65XX3UpH7n0zmWt4Iam_1loQiRYAIcVhUBRHOOn4uHkCsrULcQHrRhss9qBjIc9DoxZ10vOgKn0atFgr9vzzBAVaekeJQxVcxlw_kAIzawNV4RD7DMQcwMlubHQ2Vz0Z4s487G2524DFzvTFZtOHbYD8GAYMIi1X8NBw14AoAmh1emWpQxQJNddfBQG7fxGiT2HRZumFvNuGBUDxP6_Cxil3PNiQ9eQz_lw8pi2Ji3oBrfsqn7f-iBMg_Jz5OHEdGU4dunl1AzLKN8DY5i_fB7u470jYk5D5BKNsd1UiuzUZyZL27VsNqGhk-iIz8XooQMM8bZSKV3nKc-uxWqgDHtnFWeM5nERBulEZTXAjUlmoWrjWn-QFcsaXLMCS7H6XHwLuFuVhVxJjuBzsiB1jU3bxo2LdyR-N1_Bfi_UJhvOj2D57pwnoFpRjAMxa_dSMmoVHTfAZbwpkNmN-Pa6zJpcjAg3Oill08iIGEY4LMAwqb8DVK1iGplFpVCaiR7aeg5YOe7UMie8ScRpflzCVopjunB1UzT3MsghJRcEzBQYmewAaJG7_t_41kSPUUQdXkk9Ug58Iin7udvQx18T-LxITpAOswUgPuiX8e0I_g2vn8_vVLf2pLtnEATftiwAXfAktSoIvmcJCmAG7qYIDxkxkk7nIYTSw1mG8=w800-h447-no)

# FLAGS
```ruby
USER
"9ecdd6a3aedf24b41562fea70f4cb3e8"
ROOT
"e621a0b5041708797c4fc4728bc72b4b"
```

